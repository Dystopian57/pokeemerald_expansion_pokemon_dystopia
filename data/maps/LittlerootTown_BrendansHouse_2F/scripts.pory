raw `
LittlerootTown_BrendansHouse_2F_MapScripts::
	map_script MAP_SCRIPT_ON_TRANSITION, LittlerootTown_BrendansHouse_2F_OnTransition
	map_script MAP_SCRIPT_ON_WARP_INTO_MAP_TABLE, LittlerootTown_BrendansHouse_2F_OnWarp
	.byte 0

LittlerootTown_BrendansHouse_2F_OnTransition:
	call_if_lt VAR_LITTLEROOT_RIVAL_STATE, 2, LittlerootTown_BrendansHouse_2F_EventScript_CheckSetReadyToMeetBrendan
	call_if_ge VAR_LITTLEROOT_RIVAL_STATE, 3, LittlerootTown_BrendansHouse_2F_EventScript_CheckShouldUpdateBrendanPos
	call_if_eq VAR_LITTLEROOT_INTRO_STATE, 4, PlayersHouse_2F_EventScript_BlockStairsUntilClockIsSet
	call SecretBase_EventScript_SetDecorationFlags
	setvar VAR_SECRET_BASE_INITIALIZED, 0
	end

LittlerootTown_BrendansHouse_2F_EventScript_CheckShouldUpdateBrendanPos::
	goto_if_set FLAG_MET_RIVAL_LILYCOVE, LittlerootTown_BrendansHouse_2F_EventScript_TryUpdateBrendanPos
	goto_if_ge VAR_BIRCH_LAB_STATE, 2, LittlerootTown_BrendansHouse_2F_EventScript_Ret
	goto LittlerootTown_BrendansHouse_2F_EventScript_TryUpdateBrendanPos

LittlerootTown_BrendansHouse_2F_EventScript_TryUpdateBrendanPos::
	checkplayergender
	goto_if_eq VAR_RESULT, MALE, LittlerootTown_BrendansHouse_2F_EventScript_Ret
	@ Odd that the MaysHouse equivalent was used below instead
	goto_if_ge VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 2, LittlerootTown_MaysHouse_2F_EventScript_Ret
	return

LittlerootTown_BrendansHouse_2F_EventScript_Ret::
	return

LittlerootTown_BrendansHouse_2F_EventScript_CheckSetReadyToMeetBrendan::
	checkplayergender
	goto_if_eq VAR_RESULT, FEMALE, LittlerootTown_BrendansHouse_2F_EventScript_SetReadyToMeetBrendan
	return

LittlerootTown_BrendansHouse_2F_EventScript_SetReadyToMeetBrendan::
	setvar VAR_LITTLEROOT_RIVAL_STATE, 2
	return

LittlerootTown_BrendansHouse_2F_OnWarp:
	map_script_2 VAR_SECRET_BASE_INITIALIZED, 0, LittlerootTown_BrendansHouse_2F_EventScript_CheckInitDecor
	.2byte 0

LittlerootTown_BrendansHouse_2F_EventScript_CheckInitDecor::
	checkplayergender
	goto_if_eq VAR_RESULT, MALE, SecretBase_EventScript_InitDecorations
	end

LittlerootTown_BrendansHouse_2F_EventScript_RivalsPokeBall::
	lockall
	goto_if_eq VAR_LITTLEROOT_RIVAL_STATE, 2, LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendan
	msgbox RivalsHouse_2F_Text_ItsRivalsPokeBall, MSGBOX_DEFAULT
	releaseall
	end

LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendan::
	delay 10
	waitmovement 0
	playse SE_PIN
	waitmovement 0
	waitmovement 0
	delay 10
	playbgm MUS_ENCOUNTER_BRENDAN, TRUE
	call_if_eq VAR_FACING, DIR_NORTH, LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendanNorth
	call_if_eq VAR_FACING, DIR_SOUTH, LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendanSouth
	call_if_eq VAR_FACING, DIR_WEST, LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendanWest
	call_if_eq VAR_FACING, DIR_EAST, LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendanEast
	setvar VAR_LITTLEROOT_RIVAL_STATE, 3
	setflag FLAG_HIDE_LITTLEROOT_TOWN_BRENDANS_HOUSE_2F_POKE_BALL
	clearflag FLAG_HIDE_LITTLEROOT_TOWN_BRENDANS_HOUSE_RIVAL_BEDROOM
	setvar VAR_LITTLEROOT_TOWN_STATE, 1
	savebgm MUS_DUMMY
	fadedefaultbgm
	releaseall
	end

LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendanNorth::
	waitmovement 0
	applymovement LOCALID_PLAYER, Common_Movement_WalkInPlaceFasterRight
	waitmovement 0
	msgbox RivalsHouse_2F_Text_BrendanWhoAreYou, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_PLAYER, LittlerootTown_BrendansHouse_2F_Movement_PlayerWatchBrendanNorth
	waitmovement 0
	return

LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendanSouth::
	waitmovement 0
	applymovement LOCALID_PLAYER, Common_Movement_WalkInPlaceFasterRight
	waitmovement 0
	msgbox RivalsHouse_2F_Text_BrendanWhoAreYou, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_PLAYER, LittlerootTown_BrendansHouse_2F_Movement_PlayerWatchBrendanSouth
	waitmovement 0
	return

LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendanWest::
	waitmovement 0
	applymovement LOCALID_PLAYER, Common_Movement_WalkInPlaceFasterRight
	waitmovement 0
	msgbox RivalsHouse_2F_Text_BrendanWhoAreYou, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_PLAYER, LittlerootTown_BrendansHouse_2F_Movement_PlayerWatchBrendanWest
	waitmovement 0
	return

LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendanEast::
	waitmovement 0
	applymovement LOCALID_PLAYER, Common_Movement_WalkInPlaceFasterUp
	waitmovement 0
	msgbox RivalsHouse_2F_Text_BrendanWhoAreYou, MSGBOX_DEFAULT
	closemessage
	waitmovement 0
	return

LittlerootTown_BrendansHouse_2F_Movement_BrendanEnters:
	walk_down
	walk_down
	walk_in_place_faster_left
	step_end

LittlerootTown_BrendansHouse_2F_Movement_BrendanApproachPlayerNorth:
	walk_left
	walk_left
	walk_down
	walk_down
	walk_left
	step_end

LittlerootTown_BrendansHouse_2F_Movement_BrendanWalkToPCNorth:
	walk_up
	walk_up
	walk_up
	walk_left
	walk_left
	walk_left
	walk_left
	walk_in_place_faster_up
	step_end

LittlerootTown_BrendansHouse_2F_Movement_PlayerWatchBrendanNorth:
	delay_16
	walk_in_place_faster_up
	delay_16
	delay_16
	delay_16
	delay_16
	walk_in_place_faster_left
	step_end

LittlerootTown_BrendansHouse_2F_Movement_BrendanApproachPlayerSouth:
	walk_left
	walk_left
	walk_left
	step_end

LittlerootTown_BrendansHouse_2F_Movement_BrendanWalkToPCSouth:
	walk_up
	walk_left
	walk_left
	walk_left
	walk_left
	walk_in_place_faster_up
	step_end

LittlerootTown_BrendansHouse_2F_Movement_PlayerWatchBrendanSouth:
	delay_16
	walk_in_place_faster_up
	delay_16
	delay_16
	walk_in_place_faster_left
	step_end

LittlerootTown_BrendansHouse_2F_Movement_BrendanApproachPlayerWest:
	walk_left
	walk_left
	walk_down
	walk_in_place_faster_left
	step_end

LittlerootTown_BrendansHouse_2F_Movement_BrendanWalkToPCWest:
	walk_up
	walk_up
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_in_place_faster_up
	step_end

LittlerootTown_BrendansHouse_2F_Movement_PlayerWatchBrendanWest:
	delay_8
	delay_16
	walk_in_place_faster_up
	delay_16
	delay_16
	walk_in_place_faster_left
	step_end

LittlerootTown_BrendansHouse_2F_Movement_BrendanApproachPlayerEast:
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_in_place_faster_down
	step_end

LittlerootTown_BrendansHouse_2F_Movement_BrendanWalkToPCEast:
	walk_up
	walk_left
	walk_left
	walk_in_place_faster_up
	step_end

@ Unused, the player is already facing this direction so its unneeded
LittlerootTown_BrendansHouse_2F_Movement_PlayerWatchBrendanEast:
	delay_16
	delay_16
	walk_in_place_faster_left
	step_end

LittlerootTown_BrendansHouse_2F_EventScript_PC::
	lockall
	checkplayergender
	goto_if_eq VAR_RESULT, MALE, LittlerootTown_BrendansHouse_2F_EventScript_CheckPlayersPC
	goto_if_eq VAR_RESULT, FEMALE, LittlerootTown_BrendansHouse_2F_EventScript_CheckPlayersPC
	end

LittlerootTown_BrendansHouse_2F_EventScript_CheckPlayersPC::
	setvar VAR_0x8004, PC_LOCATION_BRENDANS_HOUSE
	special DoPCTurnOnEffect
	playse SE_PC_ON
	msgbox gText_PlayerHouseBootPC, MSGBOX_DEFAULT
	special BedroomPC
	waitstate
	releaseall
	end

LittlerootTown_BrendansHouse_2F_EventScript_TurnOffPlayerPC::
	setvar VAR_0x8004, PC_LOCATION_BRENDANS_HOUSE
	playse SE_PC_OFF
	special DoPCTurnOffEffect
	releaseall
	end

LittlerootTown_BrendansHouse_2F_EventScript_CheckRivalsPC::
	msgbox gText_PokemonTrainerSchoolEmail, MSGBOX_DEFAULT
	releaseall
	end

PlayersHouse_2F_EventScript_Notebook::
	msgbox PlayersHouse_2F_Text_Notebook, MSGBOX_SIGN
	end

PlayersHouse_2F_EventScript_GameCube::
	msgbox PlayersHouse_2F_Text_ItsAGameCube, MSGBOX_SIGN
	end

PlayersHouse_2F_Text_ClockIsStopped:
	.string "Let's see...$"



PlayersHouse_2F_Text_Notebook:
	.string "{PLAYER} flipped open the notebook.\p"
	.string "ADVENTURE RULE NO. 1\n"
	.string "Open the MENU with START.\p"
	.string "ADVENTURE RULE NO. 2\n"
	.string "Record your progress with SAVE.\p"
	.string "The remaining pages are blank…$"

Common_Text_LookCloserAtMap:
	.string "{PLAYER} took a closer look at the\n"
	.string "HOENN region map.$"

PlayersHouse_2F_Text_ItsAGameCube:
	.string "It's a Nintendo GameCube.\p"
	.string "A Game Boy Advance is connected to\n"
	.string "serve as the Controller.$"

`


mapscripts LittlerootTown_BrendansHouse_2F_MapScripts2 {
    MAP_SCRIPT_ON_TRANSITION: Respawnatplayerbed
	MAP_SCRIPT_ON_LOAD: Respawnatplayerbed}

script Respawnatplayerbed {
   	setrespawn(HEAL_LOCATION_LITTLEROOT_TOWN_BRENDANS_HOUSE_2F)
	end 
}


script Setclocktoleave {
	lockall
	msgbox (format("Is it too early to leave...? I should check the clock."))
	applymovement (OBJ_EVENT_ID_PLAYER, cantleavebedroom)
	waitmovement(0)
	releaseall	
}

script PlayerRoomGamecube {
	lockall
	msgbox (format("{COLOR DARK_GRAY}It's an old Gamecube. The game 'Harvest Moon: A Wonderful Life' is loaded in."))
	releaseall		
}

script PlayerRoomBookshelf {
	lockall
	msgbox (format("The shelf is full of novels. Most of them are science fiction ones."))
	releaseall		
}

script PlayerRoomWardrobe {
	lockall
	msgbox (format("The wardrobe is full of dirty, smelly clothes."))
	releaseall		
}

script PlayerBed {
	lockall
    msgbox("Rest for a bit?", MSGBOX_YESNO)
	if (var(VAR_RESULT) == YES) {
	fadescreen (FADE_TO_BLACK)
	special(HealPlayerParty)
	playse (MUS_HEAL)
	msgbox (format("You rest for a while."))
	waitbuttonpress
	fadescreen (FADE_FROM_BLACK)}
	releaseall		
}

script PlayerRoomDadPrize {
	lockall
	checkplayergender
	if(var(VAR_RESULT) == MALE){
	msgbox (format("It's a Battle Frontier trophy. \pIt's quite dusty and has lost most of its
	sheen."))}
	else {msgbox (format("It's a Battle Frontier trophy. \pIt's quite dusty and has lost most of its
	sheen."))}
	releaseall		
}

script PlayerRoomBox {
	lockall
	msgbox (format("A Pokéball Rifle is dissasembled inside the box."))
	releaseall		
}

script PlayerRoomTrashCan {
	lockall
	if (!flag (FLAG_ITEM_BEDROOM_TRASHCAN))
	{msgbox (format("There's something in the trash can..."))
	giveitem (ITEM_LEFTOVERS)
	setflag (FLAG_ITEM_BEDROOM_TRASHCAN)}
	else
	{msgbox (format("The trash can is empty."))}
	releaseall		
}

script PlayerRoomTextbooks {
	lockall
	msgbox (format("A pile of textbooks lies beside the bed."))
	releaseall		
}

script PlayerRoomDiary {
	lockall
	opendiary:
	msgbox (format("A diary is open on top of the desk."))
		dynmultichoice(0, 0, TRUE, 3, 0, DYN_MULTICHOICE_CB_NONE, "Oldest entry", "Old entry", "Newest entry", "Don't read")
		if (var(VAR_RESULT) == 0) {
			msgbox (format("Today dad and mom gave me the best birthday gift ever - my first
			Pokémon! Yay!\pMommy said it's a Mankey, a Fighting type.\pIn school I learnt
			Fighting types are strong against Normal types, like the ones grandpa uses. \pOh, about 
			grandpa, Daddy said I am going to stay with him for a while...\pBecause him and mommy are going
			to be very very busy with work.\pI was a bit sad. It was my birthday, but I think everyone
			was sad today."))
			goto (opendiary)}

		if (var(VAR_RESULT) == 1) {
			msgbox (format("Today, Mankey and I are being drafted into the Hoenn army.\pAfter our 
			training, we will be sent to the Kanto front. \pI used to be scared that this day 
			may come, but after all that happened, it's like I can't feel anything anymore. \pI think I have
			ran out of all my fear, anger, and sadness. \pThis war seems to have stolen everything from me, 
			even my feelings. \pIf anything, I am curious - who is behind all of this, and why did it have 
			to happen?"))
			goto (opendiary)}
		if (var(VAR_RESULT) == 2) {
			msgbox (format("Grandfather was right all along. I am spineless. Useless. \pThere is nothing of him
			or of my parents in me. \pUseless, useless, useless.\pThey took Primeape away from me. Now I
			have nothing left of what they gave me.\pOnly this rag, and this broken house I hate. \pUseless, useless,
			useless, useless, useless... \pUSELESS.\p{COLOR LIGHT_GRAY}{SHADOW WHITE}The same word is 
			written for pages on end."))
			goto (opendiary)}

		if (var(VAR_RESULT) == 3) {
			releaseall}
	releaseall		
}

script PlayerRoomMail {
	lockall
	msgbox (format("A laptop is on the floor, with Devon Mail open."))
	backtomail:
	msgbox (format("There's three mails in the inbox, from three different senders."))
		dynmultichoice(0, 0, TRUE, 3, 0, DYN_MULTICHOICE_CB_NONE, "Devon Corp - Rustboro HQ", "Petalburg Gym", "Oldale DLC", "Ignore laptop")
		if (var(VAR_RESULT) == 0) {
			msgbox (format("From: Devon Corporation. \nSubject: Mail has been delivered.
			\p After failing to deliver your package personally, our mailing staff has deposited it in your allocated
			   mailbox right outside your domicile. \pPlease check it at your earliest convenience. \p Stay safe,
			   \n Devon Corporation"))
			   goto(backtomail)}

		if (var(VAR_RESULT) == 1) {
			checkplayergender
			if(var(VAR_RESULT) == MALE){
			msgbox (format("From: Petalburg Gym. \nSubject: How's it going, {PLAYER}? \p
			Hey lad. How is your leg? Does it still give you trouble?\p I know I said I'd visit, 
			but things have been very busy in the gym.\pMaybe you can make the trip instead, once you're 
			feeling better. \pWe could have a Pokémon battle, just like your dad and I used to. 
			\pHe beat me when he was half your age… he was a real prodigy. 
			\pWell, got to go. Remember to eat well, and do plenty of exercise. 
			\pTake care,
			\nNorman."))}
			else
			{msgbox (format("From: Petalburg Gym. \nSubject: How's it going, {PLAYER}? \p
			Hey lass. How is your arm? Does it still give you trouble?\p I know I said I'd visit, 
			but things have been very busy in the gym.\pMaybe you can make the trip instead, once you're 
			feeling better. \pWe could have a Pokémon battle, just like your mom and I used to. 
			\pShe beat me when he was half your age… she was a real prodigy. 
			\pWell, got to go. Remember to eat well, and do plenty of exercise. 
			\pTake care,
			\nNorman."))}
			goto(backtomail)}
		if (var(VAR_RESULT) == 2) {
			msgbox (format("From: Oldale DLC. \nSubject: You are not alone.
			\p Did you live through traumatic experiences during the Kantonian war? 
			If so, you are not alone. \pCome join us at the newly-established Oldale-based DLC 
			(Devon Learning Center) and share your burden in an environment of kindness through a  
			group-based, PTSD Therapy. \p
			Disclaimer: Only SAFEMON are allowed into the center during sessions."))
			goto(backtomail)}

		if (var(VAR_RESULT) == 3) {
			releaseall}
		releaseall
}

movement cantleavebedroom{
		walk_down * 1
}
